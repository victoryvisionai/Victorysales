
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Turn images into videos using AI - Victory Vision"/>
    <meta name="author" content="Victory Vision"/>
    <title>Victory Vision - Video Builder</title>
    <link rel="stylesheet" href="style.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script defer src="scripts.js"></script>
</head>
<body>
<header class="navbar">
    <div class="logo"><img src="logo.jpg" alt="Victory Vision Logo"/></div>
    <nav>
        <ul>
            <li><a href="ai-opt">ü§ñ</a></li>
            <li><a href="images">Images</a></li>
            <li><a href="videos">Videos</a></li>
            <li><a href="pages">Pages</a></li>
            <li><a href="ads">Ads</a></li>
            <li><a href="leads">Leads</a></li>
            <li><a href="social">Social</a></li>
            <li><a href="messages">Messages</a></li>
            <li><a href="settings">‚öôÔ∏è</a></li>
        </ul>
    </nav>
</header>

<div class="content">
    <div class="card">
        <h2>Create AI-Powered Video</h2>
        <img id="videoPreview" src="" alt="Selected Image" style="max-width:100%;margin-bottom:10px;"/>
        <textarea id="videoPrompt" placeholder="Describe how this image should animate or what story it should tell..."></textarea>
        <button onclick="generateVideo()">üé¨ Generate Video</button>
        <div id="videoStatus" style="margin-top:15px;color:#666;"></div>
        <div id="videoOutput"></div>
    </div>
</div>

<footer style="background:#0A3161;color:#fff;text-align:center;padding:15px;">
    <p>&copy; 2025 Victory Vision Digital Out of Home. All rights reserved.</p>
</footer>

<script>
    // Load selected image from query param
    document.addEventListener("DOMContentLoaded", () => {
        const params = new URLSearchParams(window.location.search);
        const imageUrl = params.get("image");
        if (imageUrl) {
            document.getElementById("videoPreview").src = decodeURIComponent(imageUrl);
        }
    });

    async function generateVideo() {
        const imageUrl = document.getElementById("videoPreview").src;
        const prompt = document.getElementById("videoPrompt").value;
        const statusDiv = document.getElementById("videoStatus");
        const outputDiv = document.getElementById("videoOutput");
        statusDiv.innerText = "Sending to video agent...";
        outputDiv.innerHTML = "";

        const response = await fetch("https://victoryvision.app.n8n.cloud/webhook/generate-video", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                image_url: imageUrl,
                prompt: prompt,
                customer_id: "client-xyz"
            })
        });

        const data = await response.json();
        if (data.video_url) {
            const vid = document.createElement("video");
            vid.src = data.video_url;
            vid.controls = true;
            vid.style.maxWidth = "100%";
            outputDiv.appendChild(vid);
            statusDiv.innerText = "‚úÖ Video generated!";
        } else {
            statusDiv.innerText = "‚ö†Ô∏è Video generation failed. Try again.";
        }
    }
</script>
</body>
</html>
